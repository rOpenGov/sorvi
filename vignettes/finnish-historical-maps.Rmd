---
title: "Finnish historical maps with sorvi R package"
author: "Pyry Kantanen"
date: "`r Sys.Date()`"
output: 
  rmarkdown::html_vignette:
    toc: true
vignette: >
  %\VignetteIndexEntry{FFinnish historical maps with sorvi R package}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Finnish historical maps with sorvi

## Introduction
 
Accessing high quality shapefiles and other vectorized geospatial location boundaries for different administrative divisions is nowadays trivial as datasets are readily available through download services and APIs. Packages such as [geofi/](https://ropengov.github.io/geofi/) and [giscoR](https://ropengov.github.io/giscoR/) make it easy to draw maps in the case of Finland and European NUTS areas and visualize statistical data in the form of choropleth maps.

However, when it comes to historical boundaries such as Finnish municipality boundaries before year 2013, drawing maps becomes harder. For example, National Land Survey of Finland offers municipality based boundaries only for the current year and Statistics Finland offers maps only from 2013 onwards. In the time period of 2005 to 2022 only, Finnish municipalities have undergone 79 merger processes with their number falling from 431 to 309, or approximately by one fourth. In time series data municipality mergers are taken into account by the Statistics Authorities, making it possible to see how current municipalities and their parts combined have developed in the past. In most cases Statistics Finland uses the current municipality division as the basis of population statistics time series.

## Previous work

In 2003-2012 [FinnONTO project](https://seco.cs.aalto.fi/projects/finnonto/) driven by the [Semantic Computing Research Group (SeCo)](https://seco.cs.aalto.fi) started with the ambition of laying the foundations "for a national metadata, ontology, ontology service, and linked data framework in Finland". As part of the project [National Ontology Service ONKI](http://onki.fi) was published in 2008, which was used to publish "interlinked, collaboratively created ontologies and vocabularies in a centralized way, with 150 organizations as registered users.

As part of the FinnONTO project, the [Finnish Spatio-Temporal Ontology (SAPO)](https://seco.cs.aalto.fi/ontologies/sapo/) was created. SAPO is an "ontology time series of Finnish municipalities over the time interval 1865-2010" and it as an ontology it "represents knowledge about changes (e.g. merges, splits) in historical regions (e.g. cities, counties)". The types of changes include (from [Väätäinen & Kauppinen 2015][1]): 
- establishment of a municipality (perustaminen); 
- abolishing a municipality (lakkauttaminen); 
- splitting one municipality into two or more municipalities (jakaantuminen); 
- merging two or more municipalities into a single municipality (yhdistyminen); 
- changing the ownership of a part of a municipality to another (aluesiirto); 
- changing the name of the municipality (nimenmuutos); 
- ceding a municipality or part of a municipality to another state, effectively abolishing the municipality entity in the original nation state (alueluovutus); 
- the opposite of ceding territory, meaning that land area is gained from another sovereign country and a new administrative area must be established (aluesaaminen); 
establishing new administrative area from the parts of two or more other areas (aluesiirtoperustaminen); 
- dividing existing administrative area between two or more existing administrative areas (aluesiirtojakaantuminen); 
- renting certain area to the use of another sovereign state (aluevuokraus); 
- ending the rental period of land area and returning it into sovereign rule (aluevuokrauksen loppuminen);
- formation, meaning that an administrative area has gradually started to exist without any specific founding date (muodostuminen);
- demarcation, when a clear border is defined between two administrative areas that hadn't previously had clear borders (*rajanveto*).

In practice, all Finnish municipalities have a set establishment date. Most municipalities were established in 1865 with His Imperial Majesty's Degree on Municipal Administration in the Countryside (more information in [Wikipedia, in Finnish](https://fi.wikipedia.org/w/index.php?title=Vuoden_1865_kunnallisasetus&oldid=18611717)), that moved secular administration away from church parishes to newly established municipalities. Many municipalities have also changed names at some point, been split or merged, and had border changes with their neighboring municipalities. Ceding or abolishing municipalities is mostly related to the situation after the Second World War when many Finnish municipalities in Karelia were ceded to the Soviet Union.

Since 2008, ONKI has been superseded by [Finto](https://finto.fi/en/), although it does not contain all the data that ONKI did. I have used data files (RDF/Turtle files) downloaded from ONKI as a starting point and created datasets that are feel more natural for an R user to use, using [rdflib](https://cran.r-project.org/package=rdflib) R package.

## Drawing historical maps

Historical maps can be drawn simply by using `get_municipalities()` function.

```{r}
library(sorvi)

x <- get_municipalities(year = 1912)
head(x)
```

The municipalities can be plotted with base R functions or with ggplot2.

```{r}
plot(x)

library(ggplot2)
ggplot(x) + geom_sf()
```
## Future work

As it can be seen from the visualizations above, there are some gaps in the data. For example, the dataset metadata for year 1912 shows that it has 49 empty geometries:

```
Simple feature collection with 520 features and 8 fields (with 49 geometries empty)
Geometry type: GEOMETRY
Dimension:     XY
Bounding box:  xmin: 19.08318 ymin: 59.45416 xmax: 32.019 ymax: 70.09204
Geodetic CRS:  ISN93
# A tibble: 520 × 9
# Groups:   kunta_nro [520]
```

In addition, there are some inconsistencies with the geometries compared to newer datasets downloaded from the National Land Survey of Finland / Statistics Finland API. For example, municipalities that are surrounded by rural municipalities ("maalaiskunta") can in some cases be left under the rural municipality polygon if the rural municipality polygon too simplified and doesn't have any holes. Similarly, some municipality enclaves or exclaves might not be properly represented as the borders of the municipalities are rather simplified. 

However, it must be noted that small scale information like this is not essential for drawing choropleth maps and visualizing the broad strokes of municipality administration development in Finland.

Still, users are very much welcome to fill and data gaps or provide better polygons! Opening an issue in GitHub or directly making a pull request is very much appreciated.

## References

- Kauppinen, Tomi & Väätäinen, Jari. 2015. SAPOn nykytila, ylläpito ja laajennusmahdollisuudet. Raportteja ja selvityksiä 1/2015, Kansalliskirjasto.

[1]: https://urn.fi/URN:ISBN:978-951-51-1422-8